"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[52577],{89677:function(t,n,e){e.d(n,{$V:function(){return i}});var a=e(82845),r=e(66012),o=function(t){return(null==t?void 0:t.growwStatus)===r.fh.APPROVED},u=function(t){return t&&(t.growwStatus===r.fh.UNDER_PROCESS||t.growwStatus===r.fh.SENT_TO_BANK)};function c(t,n){var e,a=[];return(null!==(e=null==t?void 0:t.bank_list)&&void 0!==e?e:[]).forEach(function(t){var e;(null!==(e=null==t?void 0:t.mandate_detail)&&void 0!==e?e:[]).forEach(function(t){(function(t,n){var e,a=(null!=t?t:{}).mandateType,c=a===r.AL.DIGIO_API||a===r.AL.DIGIO_PHYSICAL;switch(n){case r.zv.ALL_MANDATES:return!0;case r.zv.APPORVED_MANDATES:return o(t);case r.zv.STB_MANDATES:return u(t);case r.zv.APPROVED_BSE:return!c&&o(t);case r.zv.STB_BSE:return!c&&u(t);case r.zv.APPROVED_GROWW_MANDATE:return c&&o(t);case r.zv.STB_GROWW_MANDATES:return c&&u(t);case r.zv.CREATED_GROWW_MANDATES:return(null==(e=t)?void 0:e.growwStatus)===r.fh.CREATED;case r.zv.UPI_MANDATE:return o(t);default:return!1}})(t,n)&&a.push(t)})}),a}function i(t){Array.isArray(null==t?void 0:t.bank_list)&&(null==t||t.bank_list.forEach(function(t){var n,e=null!==(n=null==t?void 0:t.mandate_detail)&&void 0!==n?n:[];t.mandate_detail=null==e?void 0:e.filter(function(t){var n;return null==t?void 0:null===(n=t.consentGrantedProducts)||void 0===n?void 0:n.includes("MF")})}));var n,e,o,u=c(t,r.zv.APPORVED_MANDATES),i=c(t,r.zv.STB_MANDATES),s=c(t,r.zv.APPROVED_BSE),d=c(t,r.zv.STB_BSE),l=c(t,r.zv.APPROVED_GROWW_MANDATE),m=c(t,r.zv.STB_GROWW_MANDATES),p=(n=c(t,r.zv.ALL_MANDATES),e={},n.forEach(function(t){e[null==t?void 0:t.mandateId]=(0,a.Z)({},t)}),e),f=c(t,r.zv.CREATED_GROWW_MANDATES),v=c(t,r.zv.UPI_MANDATE),$=u.length>0||i.length>0,h=s.length>0||d.length>0;return{hasActiveMandates:$,hasActiveBseMandate:h,hasActiveGrowwMandate:l.length>0||m.length>0,growwApprovedMandates:l,allMandatesHashmap:p,allUnApprovedMandates:f,approvedMandates:u,hasUpiMandate:v.length>0}}},52577:function(t,n,e){e.d(n,{AL:function(){return L},Fm:function(){return z},Vm:function(){return U},YO:function(){return V},dX:function(){return k},mL:function(){return W}});var a,r,o,u,c,i,s,d,l=e(17891),m=e(69977),p=e(20717),f=e(98148),v=e(32992),$=e(98819),h=e(81658),A=e(66012),D=e(94503),y=e(59919),E=e(73643),I=e(40780),T=e(56539),b=e(96616),_=e(36739),w=e(66241),M=e(5852),P=e(61233),S=e(89677),g=function(t){for(var n in t)if(t[n].orderType!==h.JmG.NRM)return n;return-1},O=function(t){var n=0,e=0,a=0,r=0,o=h.DFy.PENDING,u=!0;return t.map(function(t){var o=t.orderStatus,u=t.retryable;o===h.DFy.PENDING||o===h.DFy.PAYMENT_INITIATED?(a+=1,r=!1===u?r+1:r,N(t,h.DFy.NEW)):o===h.DFy.FAILED||o===h.DFy.PAYMENT_FAILED||o===h.DFy.PAYMENT_PENDING?(n+=1,r=!1===u?r+1:r,N(t,h.DFy.REJECTED)):(o===h.DFy.COMPLETED||o===h.DFy.APPROVED)&&(e+=1,N(t,h.DFy.APPROVED))}),o=a>=1?h.DFy.PENDING:0===e&&n>=1?h.DFy.FAILED:h.DFy.SUCCESS,r>=1&&(u=!1),{orderStatus:o,pendingCount:a,successCount:e,failedCount:n,isRetryable:u}},N=function(t,n){var e=t.orderType===h.JmG.NRM;switch(n){case h.DFy.NEW:e?(0,f.L9)(y.Z.PostPayment,P.Z.OrderPending,{status:n,amount:t.amount,type:h.JmG.LUMP_SUM,orderId:t.growwOrderId}):(0,f.L9)(y.Z.PostPayment,P.Z.OrderPending,{status:n,amount:t.installmentAmount,type:h.JmG.SIP,orderId:t.growwSipId});break;case h.DFy.APPROVED:e?(0,f.L9)(y.Z.PostPayment,P.Z.OrderSuccess,{status:n,amount:t.amount,type:h.JmG.LUMP_SUM,orderId:t.growwOrderId}):(0,f.L9)(y.Z.PostPayment,P.Z.OrderSuccess,{status:n,amount:t.installmentAmount,type:h.JmG.SIP,orderId:t.growwSipId});break;case h.DFy.REJECTED:e?(0,f.L9)(y.Z.PostPayment,P.Z.OrderFailed,{status:n,amount:t.amount,type:h.JmG.LUMP_SUM,orderId:t.growwOrderId}):(0,f.L9)(y.Z.PostPayment,P.Z.OrderFailed,{status:n,amount:t.installmentAmount,type:h.JmG.SIP,orderId:t.growwSipId})}},R=function(){(0,w.is)(!0).then(function(t){t.investment_event_sent||((0,f.L9)(y.Z.Transaction,P.Z.FirstInvestmentDone),(0,v.Nt)().then(function(){}).catch(function(t){console.error("Error",t)})),(0,f.L9)(y.Z.Transaction,P.Z.InvestmentCompleted,{})}).catch(function(t){console.error("Handle",t)})},k=(a=(0,l.Z)(function(t){var n,e,a,r,o,u,c,i,s,d,l,f,v,$,A,D;return(0,p.__generator)(this,function(p){switch(p.label){case 0:return p.trys.push([0,2,,3]),[4,F(t)];case 1:if(a=(e=g(n=p.sent()))>=0?h.JmG.SIP:h.JmG.NRM,0===(r=(0,m.Z)(n)).length)return[2];return u=(o=O(r)).orderStatus,c=o.failedCount,i=o.isRetryable,s=r[0].orderRemark,d=c===(null==r?void 0:r.length),l="",n.length>0&&e>=0&&(l=n[e].mandateId),f=r.map(function(t){return t.growwOrderId}),[2,v=(($={}).orderStatus=u,$.allOrdersFailed=d,$.sipMandateId=l,$.orderType=a,$.isRetryable=i,$.orderRemark=s,$.growwOrderId=f,$)];case 2:return A=p.sent(),console.error(A),[2,((D={}).fetchOrdersFailed=!0,D)];case 3:return[2]}})}),function(t){return a.apply(this,arguments)}),F=(r=(0,l.Z)(function(t){var n,e,a,r;return(0,p.__generator)(this,function(o){switch(o.label){case 0:if(e=[],t&&(n=t.split(",")),!(Array.isArray(n)&&0!==n.length))return[3,4];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,(0,v.Nn)(n)];case 2:return e=(a=o.sent()).data,[3,4];case 3:return r=o.sent(),console.error("search order api failed-",r),[3,4];case 4:return[2,e]}})}),function(t){return r.apply(this,arguments)}),L=(o=(0,l.Z)(function(t,n,e){var a,r,o;return(0,p.__generator)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),a={},(0,f.L9)(y.Z.Transaction,P.Z.OrderStatusFetched,(a.status=t,a)),[4,Z(n,e)];case 1:return r=u.sent(),t!==h.DFy.FAILED&&R(),[2,r];case 2:return o=u.sent(),console.error("Remove Subscription errr",o),[3,3];case 3:return[2]}})}),function(t,n,e){return o.apply(this,arguments)}),Z=(u=(0,l.Z)(function(t,n){var e,a,r,o;return(0,p.__generator)(this,function(u){switch(u.label){case 0:if((0,b.a)(t))return[3,5];u.label=1;case 1:return u.trys.push([1,3,,4]),[4,C(t)];case 2:return[2,e=u.sent()];case 3:return a=u.sent(),console.error("Mandate Info Fetch Error",a),[3,4];case 4:return[3,8];case 5:return u.trys.push([5,7,,8]),[4,G(n)];case 6:return[2,r=u.sent()];case 7:return o=u.sent(),console.error("Bank Details Info Fetch Error",o),[3,8];case 8:return[2]}})}),function(t,n){return u.apply(this,arguments)}),C=(c=(0,l.Z)(function(t){var n,e,a,r,o,u,c,i,s,d,l,m,v,h,D,E,I,T,b,_,w;return(0,p.__generator)(this,function(p){switch(p.label){case 0:n=!1,e=!1,a="",r="",o=null,p.label=1;case 1:return p.trys.push([1,3,,4]),[4,(0,$.cM)(t)];case 2:return u=p.sent(),I={},s=(i=null!==(c=null==u?void 0:u.data)&&void 0!==c?c:I).mandateContext,d=i.growwStatus,l=i.mandateTypeRequest,m=i.bankName,v=i.bankId,h=i.accountNumber,D=i.ifscCode,E=i.mandateId,d!==A.fh.APPROVED&&(l===A.AL.DIGIO_PHYSICAL?(n=d!==A.fh.UNDER_PROCESS,o=s.physicalFormFileName):(l===A.AL.DIGIO_API||l===A.AL.N)&&(e=d!==A.fh.SENT_TO_BANK,a=null!==(T=s.mandateAuthUrl)&&void 0!==T?T:"",r=null!==(b=null==s?void 0:s.tokenId)&&void 0!==b?b:"")),[2,{bankDetails:{bank_name:m,bank_id:v,account_number_mask:h,ifsc_code:D},sipMandateId:E,showMandate:n,showGrowwMandate:e,mandateUrl:a,tokenId:r,physicalFormFileName:o,mandateFetched:!0}];case 3:return _=p.sent(),console.error("check mandate errr",_),w={},(0,f.L9)(y.Z.Transaction,P.Z.FetchMandateStatusFailed,(w.response=_,w)),[3,4];case 4:return[2]}})}),function(t){return c.apply(this,arguments)}),G=(i=(0,l.Z)(function(t){var n,e,a,r,o,u,c,i,s,d;return(0,p.__generator)(this,function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,(0,D.u)(null===h.S$5||void 0===h.S$5?void 0:h.S$5.MF,!1,t)];case 1:for(o=0,a=null!==(e=null==(n=l.sent())?void 0:n.bank_list)&&void 0!==e?e:[],r={};o<a.length;o++)if((u=a[o]).is_default){r=u;break}return[2,c=((i={}).bankDetails=r,i.mandateFetched=!0,i.bankAndMandateData=n,i)];case 2:return s=l.sent(),console.error("check mandate errr",s),d={},(0,f.L9)(y.Z.Transaction,P.Z.FetchMandateStatusFailed,(d.response=s,d)),[3,3];case 3:return[2]}})}),function(t){return i.apply(this,arguments)}),U=(s=(0,l.Z)(function(t,n,e){var a,r,o,u,c,i,s,d,l,m,v,$,D,E,I,T,b,_,w,g,O,N,R,k,F=arguments;return(0,p.__generator)(this,function(p){switch(p.label){case 0:if(a=F.length>3&&void 0!==F[3]&&F[3],r=F.length>4&&void 0!==F[4]&&F[4],u=!(o=(0,S.$V)(t).hasActiveMandates),c=h.S$5.MF,!(u||a))return[3,5];p.label=1;case 1:return p.trys.push([1,3,,4]),[4,z(c,{})];case 2:switch(i=p.sent(),v={},d=(s=null!=i?i:v).mandateUrl,l=s.mandateTypeRequest,m=s.mandateId,w={},D=($=null!=n?n:w).growwOrderId,E=$.schemeNameVal,I=$.investmentType,T=$.amount,b=$.isMultiCheckout,_=$.cartItemCount,g=b?"".concat(b,"_").concat(D,"_").concat(T,"_").concat(_):"".concat(!1,"_").concat(D,"_").concat(E,"_").concat(I,"_").concat(T),O="".concat("https://groww.in","/order/groww-mandate/status?investDetails=").concat(g,"_").concat(m,"?hasUpiMandate=").concat(r),l){case A.AL.DIGIO_API:case A.AL.N:d&&((0,f.L9)(y.Z.Transaction,P.Z.TransactionAutopayOTPRedirect),N=d+"&redirect_url=".concat(O),window.open(N,"_self"));break;case A.AL.DIGIO_PHYSICAL:(0,f.L9)(y.Z.Transaction,P.Z.TransactionAutopayFormRedirect),R="/order/groww-mandate/status?investDetails=".concat(g,"_otm"),e.push(M.Z6.GENERATE_OTM+"?bank_id=".concat(t.bank_id,"&mandate_type=").concat(l,"&mandateOriginator=").concat(c,"&redirect_url=").concat(R))}return[3,4];case 3:return k=p.sent(),console.error("Error while fetching mandate url",k),[3,4];case 4:return[3,6];case 5:return[2,null];case 6:return[2]}})}),function(t,n,e){return s.apply(this,arguments)}),W=function(t,n,e,a){var r=null!=n?n:{},o=r.growwOrderId,u=r.schemeNameVal,c=r.investmentType,i=r.amount,s=r.isMultiCheckout,d=r.cartItemCount,l=s?"".concat(s,"_").concat(o,"_").concat(i,"_").concat(d):"".concat(!1,"_").concat(o,"_").concat(u,"_").concat(c,"_").concat(i),m="/order/groww-mandate/status?investDetails=".concat(l,"_otm");(0,f.L9)(y.Z.Transaction,P.Z.AutomateSipClick,{type:h.zXi.OTM}),t.push(M.Z6.UPLOAD_OTM+"?mandate_id=".concat(a,"&file_name=").concat(e,"&redirect_url=").concat(m))},z=(d=(0,l.Z)(function(t,n){var e,a,r,o,u,c,i,s,d,l,v,h,A,D,b,w,M,P,S,g,O,N,R,k,F,L,Z,C,G,U,W,z,V,B,J;return(0,p.__generator)(this,function(p){switch(p.label){case 0:c={},a=(e=null!=n?n:c).source,r=e.investDetails,o=e.retryMandateId,i=(u=e.isMandateRetryEnabled)&&o,p.label=1;case 1:if(p.trys.push([1,6,,7]),!i)return[3,3];return s={},(0,f.L9)(y.Z.MutualFunds,I.Z.RetryMandate,(s.mandateId=o,s.source=a,s)),[4,(0,$.WU)(o)];case 2:return d=p.sent(),b={},h=(v=null!==(l=null==d?void 0:d.data)&&void 0!==l?l:b).mandateContext,A=v.mandateId,D=v.mandateTypeRequest,M={},w=(null!=h?h:M).mandateAuthUrl,P=r,r&&(S=null==r?void 0:r.split("_"),null==(g=(0,m.Z)(S))||g.pop(),g.push(A),P=(0,m.Z)(g).join("_")),[2,O=((N={}).mandateId=A,N.mandateUrl=w,N.mandateTypeRequest=D,N.updatedMandateDetails=P,N)];case 3:return R=!0,[4,(0,$.nF)(t,R)];case 4:if(k=p.sent(),U={},V={},k.status===E.ql)return Z=(L=null!==(F=null==k?void 0:k.data)&&void 0!==F?F:U).mandateContext,C=L.mandateTypeRequest,G=L.mandateId,W=Z.mandateAuthUrl,[2,z=(V.mandateId=G,V.mandateUrl=W,V.mandateTypeRequest=C,V.updatedMandateDetails=r,V)];throw Error("create mandate api failed");case 5:return[3,7];case 6:throw B=p.sent(),console.error("create mandate api failed-",B),J={},_.c.error((J.subText=T.ap.GENERAL_ERROR_RELOAD,J)),Error("create mandate api failed");case 7:return[2]}})}),function(t,n){return d.apply(this,arguments)}),V=function(t,n,e){var a=h.S$5.MF,r=null!=n?n:{},o=r.sipMandateId,u=r.mandateUrl,c=r.tokenId;if(o){if((0,f.L9)(y.Z.Transaction,P.Z.AutomateSipClick,{type:h.zXi.GROWW_MANDATE}),!(0,b.a)(u)){var i=u,s=null!=e?e:{},d=s.growwOrderId,l=s.schemeNameVal,m=s.investmentType,p=s.amount,v=s.isMultiCheckout,$=s.cartItemCount,A=v?"".concat(v,"_").concat(d,"_").concat(p,"_").concat($):"".concat(!1,"_").concat(d,"_").concat(l,"_").concat(m,"_").concat(p),D="".concat("https://groww.in","/order/groww-mandate/status?investDetails=").concat(A);i=i+"".concat(c?"?token_id="+c+"&":"?")+"redirect_url=".concat(D),window.open(i,"_self")}}else(0,f.L9)(y.Z.Transaction,P.Z.AutomateSipClick,{type:h.zXi.GROWW_MANDATE}),t.push({pathname:M.Z6.GROWW_MANDATE,state:{mandateOriginator:a}})}},98819:function(t,n,e){e.d(n,{I2:function(){return i},Ir:function(){return d},K7:function(){return m},QY:function(){return v},Qh:function(){return $},WU:function(){return f},cM:function(){return l},nF:function(){return p},oC:function(){return h},p6:function(){return u},po:function(){return c},vG:function(){return s}});var a=e(96616),r=e(81658),o=e(57175);function u(){return o.be.get("/v1/api/bank_mandate/v1/initiated_mandate")}function c(t){var n="/v1/api/bank_mandate/v2/bank/client/update_default_bank?bank_id=".concat((0,a.D)(t));return o.be.post(n)}function i(t){var n="/v1/api/user/v1/bank/".concat((0,a.D)(t));return o.be.post(n)}function s(t,n){var e="/v1/api/user/v1/mandate/default/".concat((0,a.D)(t));return o.be.put(e,null,{params:{bank_id:n}})}function d(t){var n="/v1/api/groww_mandate/v2/".concat((0,a.D)(t));return o.be.delete(n)}function l(t){var n="/v1/api/user/v1/mandate/".concat((0,a.D)(t),"/status");return o.be.get(n)}function m(t){return o.be.get("/v1/api/doc/user/v1/download/user/get_mandate_pdf",{responseType:"blob",params:{file_name:t}})}var p=function(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.S$5.GENERIC,e=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,u=arguments.length>3?arguments[3]:void 0,c={};return n===r.S$5.MF?(t="/v1/api/sip/v3/create_mandate",c={mandateOriginator:n,is_nb_dc_present:e}):(t="/v1/api/bank_mandate/v1/extended/create_mandate",c={mandateOriginator:n,mandateContext:{mandateType:a},mandateType:null!=a?a:"",userBankId:null!=u?u:""}),o.be.post(t,c)},f=function(t){var n="/v1/api/groww_mandate/v1/mandate/retry/".concat(encodeURI(t));return o.be.post(n)};function v(t,n){var e="/v1/api/bank_mandate/v2/bank/client/edit/bank?bank_id=".concat(encodeURI(t),"&ifsc=").concat(encodeURI(n));return o.be.post(e)}function $(t){var n="/v1/api/bank_mandate/v2/bank/".concat(encodeURI(t),"/mandate_type");return o.be.get(n)}function h(t){return o.be.get("/v1/api/bse/v1/bank/config/list/supported/mandate",{params:{bank_name:t}})}},73643:function(t,n,e){e.d(n,{as:function(){return o},hK:function(){return a},ql:function(){return r}});var a=[{title:"Total Put OI",subTitle:"The total number of open put option contracts of a security for a particular expiry"},{title:"Total Call OI",subTitle:"The total number of open call option contracts of a security for a particular expiry"},{title:"Put:Call Ratio",subTitle:"The ratio of a security's total put OI to its total call OI"}],r=200,o={PUT:"Put",CALL:"Call",ALL:"All"}}}]);